"use strict";function GetWithoutSpecialChar(n){return n.replace(/[^0-9a-zA-Z]+/g,"-")}function isNumber(n){n=n?n:window.event;var t=n.which?n.which:n.keyCode;return t>31&&(t<48||t>57)?!1:!0}function isTextOnly(n){n=n?n:window.event;var t=n.which?n.which:n.keyCode;return t>64&&t<91||t>96&&t<123||t===9||t===8?!0:!1}function isAlphaNumeric(n){n=n?n:window.event;var t=n.which?n.which:n.keyCode;return t>64&&t<91||t>96&&t<123||t===9||t>47&&t<58||t===32||t===8||t===13?!0:!1}function isAlphaNumericAndSpecialChar(n){n=n?n:window.event;var t=n.which?n.which:n.keyCode;return t>64&&t<91||t>96&&t<123||t===9||t>47&&t<58||t===32||t===45||t===95||t===8||t===46||t===44||t===47||t===92||t===58||t===38||t===37||t===39?!0:!1}function isEmailChar(n){n=n?n:window.event;console.log(n);var t=n.which?n.which:n.keyCode;return t>64&&t<91||t>96&&t<123||t>47&&t<58||t===45||t===95||t===8||t===46?!0:!1}function isDecimal(n){n=n?n:window.event;var t=n.which?n.which:n.keyCode;return t>31&&t!==46&&(t<48||t>57||t===9)?!1:!0}function MainAppViewModel(){var n=this;n.ShopingCartKey="GAME_STORE_SHOPING_CART";n.ShopingCartKey_UPDATE="GAME_STORE_SHOPING_CART_UPDATE";n.SellingCartKey="GAME_STORE_SELLING_CART";n.SellingCartKey_UPDATE="GAME_STORE_SELLING_CART_UPDATE";n.PromoCode=ko.observable("");n.Tax_Rate=ko.observable(10);n.CreditUsed=ko.observable(0);n.Credit_Amount=ko.observable(10);n.UseCreditAmount=ko.observable(!1);n.IsUpdating_Cart=ko.observable(!1);n.Is_Cart_Updated=ko.observable(!1);n.ShippingCharge=ko.observable(0);n.ShippingCharge_Show=ko.computed(function(){return parseFloat(n.ShippingCharge()).toFixed(2)},n);n.UseCreditAmount.subscribe(function(t){t==!1&&n.CreditUsed(0)});n.ProductTypes=ko.observableArray(["Game","Console","Accessories"]);n.Selected_ProductType=ko.observable("Game");n.Cart={Id:ko.observable(""),UserId:ko.observable(0),ShopingCart:ko.observableArray([])};n.Cart2={Id:ko.observable(""),UserId:ko.observable(0),SellingCart:ko.observableArray([])};n.Temp_Selling_Cart=ko.observableArray([]);n.Total_Item_In_ShoppingCart=ko.computed(function(){return n.Cart.ShopingCart().length},n);n.Total_Item_In_SellingCart=ko.computed(function(){return n.Cart2.SellingCart().length},n);n.Set_Cart_Status=function(t){localStorage.setItem(n.ShopingCartKey_UPDATE,t)};n.Get_Cart_Status=function(){return localStorage.getItem(n.ShopingCartKey_UPDATE)};n.Set_SellingCart_Status=function(t){localStorage.setItem(n.SellingCartKey_UPDATE,t)};n.Get_SellingCart_Status=function(){return localStorage.getItem(n.SellingCartKey_UPDATE)};n.Total_Price=ko.computed(function(){var i=n.Cart.ShopingCart(),t;return i.length===0?0:(t=0,$.each(i,function(n,i){t+=parseFloat(i.TotalPrice())}),parseFloat(t).toFixed(2))},n);n.Total_Price_Sell=ko.computed(function(){var i=n.Cart2.SellingCart(),t;return i.length===0?0:(t=0,$.each(i,function(n,i){t+=parseFloat(i.TotalPrice())}),parseFloat(t).toFixed(2))},n);n.Total_Deduction=ko.computed(function(){var i=n.Cart2.SellingCart(),t;return i.length===0?0:(t=0,$.each(i,function(n,i){t+=parseFloat(i.Deduction())}),parseFloat(t).toFixed(2))},n);n.Tax_Amount=ko.computed(function(){return parseFloat(n.Total_Price()*n.Tax_Rate()/100).toFixed(2)},n);n.Tax_Amount_Sell=ko.computed(function(){return parseFloat(n.Total_Price_Sell()*n.Tax_Rate()/100).toFixed(2)},n);n.Sub_Total=ko.computed(function(){var i=n.UseCreditAmount(),t=parseFloat(n.Total_Price());return t+=parseFloat(n.Tax_Amount()),t+=parseFloat(n.ShippingCharge()),Boolean(i)===!0&&(t>=n.Credit_Amount()?(t-=n.Credit_Amount(),n.CreditUsed(n.Credit_Amount())):(n.CreditUsed(t),t=0)),parseFloat(t).toFixed(2)},n);n.Sub_Total_Sell=ko.computed(function(){var t=parseFloat(n.Total_Price_Sell());return t-=parseFloat(n.Total_Deduction()),t-=parseFloat(n.ShippingCharge()),parseFloat(t).toFixed(2)},n);n.Sub_Total_Sell_After_Deduction=ko.computed(function(){var t=parseFloat(n.Total_Price_Sell());return t-=parseFloat(n.Total_Deduction()),parseFloat(t).toFixed(2)},n);n.IsSearching_ForSell=ko.observable(!1);n.GameList_ForSell=ko.observableArray([]);n.ConsoleList_ForSell=ko.observableArray([]);n.AccessoriesList_ForSell=ko.observableArray([]);n.Search_Key_For_Sell=ko.observable("").extend({rateLimit:1e3});n.Search_Key_For_Sell.subscribe(function(t){t=t||"";t.length===0?(n.GameList_ForSell.removeAll(),n.ConsoleList_ForSell.removeAll(),n.AccessoriesList_ForSell.removeAll()):(n.IsSearching_ForSell(!0),$.ajax({type:"POST",dataType:"json",url:"/sell-yours/search",data:ko.toJSON({SearchTxt:t,ProductType:n.Selected_ProductType()}),contentType:"application/json; charset=utf-8",success:function(t){console.log(t);n.GameList_ForSell.removeAll();n.ConsoleList_ForSell.removeAll();n.AccessoriesList_ForSell.removeAll();switch(n.Selected_ProductType()){case"Game":n.GameList_ForSell(t.Games);break;case"Console":n.ConsoleList_ForSell(t.Consoles);break;case"Accessories":n.AccessoriesList_ForSell(t.Accessories)}n.IsSearching_ForSell(!1)}}))});n.Add_To_Shoping_Cart=function(t,i,r,u,f){console.log("Add_To_Shoping_Cart",t,i,r,u,f);var e=ko.utils.arrayFirst(n.Cart.ShopingCart(),function(n){return n.Product_Id()===t&&n.Product_Type()===r&&n.Product_TypeId()===i&&n.SKU()===f});console.log(e);(e===undefined||e===null)&&(e=new n.ShopingCartViewModel,e.Product_Id(t),e.Product_TypeId(i),e.Product_Type(r),e.Price(u),e.Quantity(1),e.SKU(f||""),n.Cart.ShopingCart.push(e),console.log(ko.toJSON(e)));n.Set_Cart_Status("false");localStorage.setObject(n.ShopingCartKey,n.Cart);n.Save_Cart_details_in_Db()};n.Add_To_Selling_Cart=function(t,i,r,u,f){console.log("Add_To_Selling_Cart",t,i,r,u,f);var e=ko.utils.arrayFirst(n.Cart2.SellingCart(),function(n){return n.Product_Id()===t&&n.Product_Type()===r&&n.Product_TypeId()===i&&n.SKU()===f});console.log(e);(e===undefined||e===null)&&(e=new n.SellingCartViewModel,e.Product_Id(t),e.Product_TypeId(i),e.Product_Type(r),e.Price(u),e.Quantity(1),e.SKU(f||""),n.Cart2.SellingCart.push(e),console.log(ko.toJSON(e)));n.Set_SellingCart_Status("false");localStorage.setObject(n.SellingCartKey,n.Cart2);n.Save_SellingCart_details_in_Db()};n.On_Selling_Item_Selected=function(t){var r,i;if(console.log("On_Selling_Item_Selected",t),r=ko.utils.arrayFirst(n.Temp_Selling_Cart(),function(n){return n.SKU()===t.SKU}),console.log("product:",r),r===undefined||r===null){i=new n.SellingCartViewModel;i.Product_Id(t.Id);i.Product_Name(t.Name);i.ImageUrl(t.ImageUrl);i.PageUrl(t.PageUrl);i.Price(t.Buying_Price);i.SKU(t.SKU);i.Quantity(1);switch(n.Selected_ProductType()){case"Game":i.Product_TypeName(t.PlatformName);i.Product_TypeId(t.PlatformId);i.Product_Type("Game");break;case"Console":i.Product_TypeName(t.ProductTypeName);i.Product_TypeId(t.Product_TypeId);i.Product_Type("Console");break;case"Accessories":i.Product_TypeName(t.Product_TypeName);i.Product_TypeId(t.Product_TypeId);i.Product_Type("Accessories")}console.log("product:",ko.toJSON(i));n.Temp_Selling_Cart.push(i);console.log(ko.toJSON(n.Temp_Selling_Cart()))}n.Search_Key_For_Sell("");n.GameList_ForSell.removeAll();n.ConsoleList_ForSell.removeAll();n.AccessoriesList_ForSell.removeAll()};n.Remove_Item_From_ShopingCart=function(t){n.Set_Cart_Status("false");n.Cart.ShopingCart.remove(t);localStorage.setObject(n.ShopingCartKey,n.Cart);n.Save_Cart_details_in_Db()};n.Remove_Item_From_SellingCart=function(t){n.Set_SellingCart_Status("false");n.Cart2.SellingCart.remove(t);localStorage.setObject(n.SellingCartKey,n.Cart2);n.Save_SellingCart_details_in_Db()};n.Update_Quantity=function(){localStorage.setObject(n.ShopingCartKey,n.Cart);var t=localStorage.getObject(n.ShopingCartKey);n.Set_Cart_Status("false");n.Update_Total_Price()};n.ShopingCartViewModel=function(){var n=this;n.Product_Id=ko.observable(0);n.Product_Name=ko.observable("");n.Product_Type=ko.observable("");n.Product_TypeId=ko.observable(0);n.Product_TypeName=ko.observable("");n.Quantity=ko.observable(0).extend({notify:"always"});n.Price=ko.observable(0);n.ImageUrl=ko.observable("");n.PageUrl=ko.observable("");n.CartType="Shopping";n.SKU=ko.observable("");n.Pre_Owned_Oprions=[{value:!1,name:"New"},{value:!0,name:"Pre Owned"}];n.TotalPrice=ko.computed(function(){var t=t=parseFloat(n.Price())*parseInt(n.Quantity());return parseFloat(t).toFixed(2)},n)};n.SellingCartViewModel=function(){var n=this;n.Product_Id=ko.observable(0);n.Condition=ko.observable(-1);n.BoxValue=ko.observable(-1);n.ManualValue=ko.observable(-1);n.Product_Name=ko.observable("");n.Product_Type=ko.observable("");n.Product_TypeId=ko.observable(0);n.Product_TypeName=ko.observable("");n.Quantity=ko.observable(1);n.Price=ko.observable(0);n.ImageUrl=ko.observable("");n.PageUrl=ko.observable("");n.CartType="Selling";n.SKU=ko.observable("");n.IsProcessing=ko.observable(!1);n.IsItemProcessed=ko.observable(!1);n.IsAllConditionSelected=ko.computed(function(){var t=n.Condition()||-1,i=n.BoxValue()||-1,r=n.ManualValue()||-1;return console.log("cnd:",t," box:",i," manual:",r),parseInt(t)!==-1&&parseInt(i)!==-1&&parseInt(r)!==-1},n);n.TotalPrice=ko.computed(function(){var t=parseFloat(n.Price())*parseInt(n.Quantity());return parseFloat(t).toFixed(2)},n);n.Deduction=ko.computed(function(){var t=parseFloat(n.Price())*parseInt(n.Quantity()),r=n.Condition()||0,u=n.ManualValue()||0,f=n.BoxValue()||0,e=parseInt(r)+parseInt(f)+parseInt(u),i=parseFloat(t)*e/100,o=parseFloat(t)-parseFloat(i);return parseFloat(i).toFixed(2)},n);n.Sub_Total=ko.computed(function(){var t=parseFloat(n.Price())*parseInt(n.Quantity()),i=n.Condition()||0,r=n.ManualValue()||0,u=n.BoxValue()||0,f=parseInt(i)+parseInt(u)+parseInt(r),e=parseFloat(t)*f/100,o=parseFloat(t)-parseFloat(e);return parseFloat(o).toFixed(2)},n)};n.Can_Display_Sell_Credits=ko.computed(function(){var i=n.Cart2.SellingCart(),t=ko.utils.arrayFilter(i,function(n){return n.IsItemProcessed()&&n.IsAllConditionSelected()});return console.log("Can_Display_Sell_Credits",t.length),t.length},n);n.Sell_This_Product=function(t){console.log("Sell_This_Product",ko.toJSON(t));var i=ko.utils.arrayFirst(n.Temp_Selling_Cart(),function(n){return n.SKU()===t.SKU()});i.IsItemProcessed(!0);console.log("_product",i);n.Set_SellingCart_Status("false");n.Cart2.SellingCart.push(i);localStorage.setObject(n.SellingCartKey,n.Cart2);n.Temp_Selling_Cart.removeAll()};n.Check_Local_Storage_And_Update_Cart=function(){var i=localStorage.getObject(n.ShopingCartKey),t;console.log("Check_Local_Storage_And_Update_ShoppingCart",i);i!==null&&(n.Cart.Id(i.Id),n.Cart.ShopingCart.removeAll(),$.each(i.ShopingCart,function(t,i){var r=new n.ShopingCartViewModel;r.Product_TypeName(i.Product_TypeName);r.Product_TypeId(i.Product_TypeId);r.Product_Type(i.Product_Type);r.Product_Name(i.Product_Name);r.Product_Id(i.Product_Id);r.Quantity(i.Quantity);r.ImageUrl(i.ImageUrl);r.PageUrl(i.PageUrl);r.Price(i.Price);r.SKU(i.SKU);n.Cart.ShopingCart.push(r)}));t=localStorage.getObject(n.SellingCartKey);console.log("Check_Local_Storage_And_Update_SellingCart",t);t!==null&&(n.Cart2.Id(t.Id),n.Cart2.SellingCart.removeAll(),$.each(t.SellingCart,function(t,i){var r=new n.SellingCartViewModel;r.Product_TypeName(i.Product_TypeName);r.Product_TypeId(i.Product_TypeId);r.Product_Type(i.Product_Type);r.Product_Name(i.Product_Name);r.Product_Id(i.Product_Id);r.Quantity(i.Quantity);r.ImageUrl(i.ImageUrl);r.PageUrl(i.PageUrl);r.BoxValue(i.BoxValue);r.Condition(i.Condition);r.ManualValue(i.ManualValue);r.Price(i.Price);r.SKU(i.SKU);r.IsItemProcessed(i.IsItemProcessed);n.Cart2.SellingCart.push(r)}))};n.Save_Cart_details_in_Db=function(){var i,t;n.IsUpdating_Cart(!0);i=n.Get_Cart_Status();n.Cart.ShopingCart().length>0&&(t={Status:"Ready",CartType:"Shopping",Id:n.Cart.Id(),UserId:n.Cart.UserId(),Total_Price:n.Total_Price(),Tax_Rate:n.Tax_Rate(),Total_Sum:n.Sub_Total(),Tax_Amount:n.Tax_Amount(),ShippingCharge:n.ShippingCharge(),Total_Item:n.Cart.ShopingCart().length,ShopingCart:n.Cart.ShopingCart()},$.ajax({type:"POST",dataType:"json",url:"/shopping-cart/update",contentType:"application/json; charset=utf-8",data:ko.toJSON(t),success:function(t){console.log("data",t);n.IsUpdating_Cart(!1);n.Set_Cart_Status("true");n.Cart.Id(t.Id);n.Cart.ShopingCart.removeAll();$.each(t.ShopingCart,function(t,i){var r=new n.ShopingCartViewModel;r.Product_TypeName(i.Product_TypeName);r.Product_TypeId(i.Product_TypeId);r.Product_Type(i.Product_Type);r.Product_Name(i.Product_Name);r.Product_Id(i.Product_Id);r.Quantity(i.Quantity);r.ImageUrl(i.ImageUrl);r.PageUrl(i.PageUrl);r.Price(i.Price);r.SKU(i.SKU);n.Cart.ShopingCart.push(r)});localStorage.setObject(n.ShopingCartKey,n.Cart)},error:function(n){console.log(n)}}))};n.Save_SellingCart_details_in_Db=function(){var i,t;console.log("Save_SellingCart_details_in_Db");n.IsUpdating_Cart(!0);i=n.Get_SellingCart_Status();console.log("status",i);n.Cart2.SellingCart().length>0&&(t={Status:"Ready",CartType:"Selling",Id:n.Cart2.Id(),Tax_Rate:n.Tax_Rate(),UserId:n.Cart2.UserId(),Total_Price:n.Total_Price_Sell(),Total_Sum:n.Sub_Total_Sell(),Tax_Amount:n.Tax_Amount_Sell(),ShippingCharge:n.ShippingCharge(),Total_Deduction:n.Total_Deduction(),Total_Item:n.Cart2.SellingCart().length,SellingCart:n.Cart2.SellingCart()},console.log("_data",ko.toJSON(t)),$.ajax({type:"POST",dataType:"json",url:"/selling-cart/update",contentType:"application/json; charset=utf-8",data:ko.toJSON(t),success:function(t){console.log("data",t);n.IsUpdating_Cart(!1);n.Set_SellingCart_Status("true");n.Cart2.Id(t.Id);n.Cart2.SellingCart.removeAll();$.each(t.SellingCart,function(t,i){var r=new n.SellingCartViewModel;r.Product_TypeName(i.Product_TypeName);r.Product_TypeId(i.Product_TypeId);r.Product_Type(i.Product_Type);r.Product_Name(i.Product_Name);r.Product_Id(i.Product_Id);r.Quantity(i.Quantity);r.ImageUrl(i.ImageUrl);r.PageUrl(i.PageUrl);r.Price(i.Price);r.SKU(i.SKU);r.BoxValue(i.BoxValue);r.Condition(i.Condition);r.ManualValue(i.ManualValue);n.Cart2.SellingCart.push(r)});localStorage.setObject(n.SellingCartKey,n.Cart2)},error:function(n){console.log(n)}}))};n.Check_out_SellingCart=function(){var t,i;console.log("Check_out_SellingCart");t=ko.utils.arrayFirst(n.Cart2.SellingCart(),function(n){return parseInt(n.BoxValue())===-1||parseInt(n.ManualValue())===-1||parseInt(n.Condition())===-1});t!==null&&n.Cart2.SellingCart.remove(t);n.Cart2.SellingCart().length>0&&(i={Status:"Ready",CartType:"Selling",Id:n.Cart2.Id(),Tax_Rate:n.Tax_Rate(),UserId:n.Cart2.UserId(),Total_Price:n.Total_Price_Sell(),Total_Sum:n.Sub_Total_Sell(),Tax_Amount:n.Tax_Amount_Sell(),ShippingCharge:n.ShippingCharge(),Total_Deduction:n.Total_Deduction(),Total_Item:n.Cart2.SellingCart().length,SellingCart:n.Cart2.SellingCart()},console.log("_data",ko.toJSON(i)),$.ajax({type:"POST",dataType:"json",url:"/selling-cart/sell",contentType:"application/json; charset=utf-8",data:ko.toJSON(i),success:function(t){console.log("data",t);n.Cart2.Id(t);localStorage.setObject(n.SellingCartKey,n.Cart2);window.location.href="/check-out-1/"+t},error:function(n){console.log(n)}}))};n.Check_out_Shopping_Cart=function(){if(console.log("Check_out_Shopping_Cart"),n.Cart.ShopingCart().length>0){var t={Status:"Ready",CartType:"Shopping",Id:n.Cart.Id(),Tax_Rate:n.Tax_Rate(),UserId:n.Cart.UserId(),PromoCode:n.PromoCode(),Total_Sum:n.Sub_Total(),Tax_Amount:n.Tax_Amount(),CreditUsed:n.CreditUsed(),Total_Price:n.Total_Price(),ShopingCart:n.Cart.ShopingCart(),ShippingCharge:n.ShippingCharge(),Total_Item:n.Cart.ShopingCart().length};console.log("_data",t);n.IsUpdating_Cart(!0);$.when($.ajax({type:"POST",dataType:"json",url:"/shopping-cart/update-total-price",contentType:"application/json; charset=utf-8",data:ko.toJSON(t)})).then(function(){window.location.href="/check-out-1/"+n.Cart.Id()})}};n.Get_Shopping_Cart_Details=function(){n.IsUpdating_Cart(!0);$.ajax({type:"GET",dataType:"json",url:"/shopping-cart/"+n.Cart.UserId(),contentType:"application/json; charset=utf-8",success:function(t){n.IsUpdating_Cart(!1);t!=null&&(n.Cart.Id(t.Id),t.ShopingCart!=null&&(n.Cart.ShopingCart.removeAll(),$.each(t.ShopingCart,function(t,i){var r=new n.ShopingCartViewModel;r.Product_TypeName(i.Product_TypeName);r.Product_TypeId(i.Product_TypeId);r.Product_Type(i.Product_Type);r.Product_Name(i.Product_Name);r.Product_Id(i.Product_Id);r.Quantity(i.Quantity);r.ImageUrl(i.ImageUrl);r.PageUrl(i.PageUrl);r.Price(i.Price);r.SKU(i.SKU);n.Cart.ShopingCart.push(r)})),localStorage.setObject(n.ShopingCartKey,n.Cart))},error:function(n){console.log(n)}})};n.Get_Selling_Cart_Details=function(){console.log("Get_Selling_Cart_Details",n.Cart.UserId());n.IsUpdating_Cart(!0);$.ajax({type:"GET",dataType:"json",url:"/selling-cart/"+n.Cart2.UserId(),contentType:"application/json; charset=utf-8",success:function(t){console.log("data",t);n.IsUpdating_Cart(!1);t!=null&&(n.Cart2.Id(t.Id),t.SellingCart!=null&&(n.Cart2.SellingCart.removeAll(),$.each(t.SellingCart,function(t,i){var r=new n.SellingCartViewModel;r.Product_TypeName(i.Product_TypeName);r.Product_TypeId(i.Product_TypeId);r.Product_Type(i.Product_Type);r.Product_Name(i.Product_Name);r.Product_Id(i.Product_Id);r.Quantity(i.Quantity);r.ImageUrl(i.ImageUrl);r.PageUrl(i.PageUrl);r.Price(i.Price);r.SKU(i.SKU);r.BoxValue(i.BoxValue);r.Condition(i.Condition);r.ManualValue(i.ManualValue);n.Cart2.SellingCart.push(r)})),localStorage.setObject(n.SellingCartKey,n.Cart2))},error:function(n){console.log(n)}})};n.OnClick_LogOff=function(){localStorage.clear();document.getElementById("logoutForm").submit()};n.Manage_Shopping_Cart=function(){if(n.Cart.ShopingCart().length>0){var t={Status:"Ready",CartType:"Shopping",Id:n.Cart.Id(),UserId:n.Cart.UserId(),Total_Price:n.Total_Price(),Tax_Rate:n.Tax_Rate(),Total_Sum:n.Sub_Total(),Tax_Amount:n.Tax_Amount(),ShippingCharge:n.ShippingCharge(),Total_Item:n.Cart.ShopingCart().length,ShopingCart:n.Cart.ShopingCart()};$.when($.ajax({type:"POST",dataType:"json",url:"/shopping-cart/update",contentType:"application/json; charset=utf-8",data:ko.toJSON(t)})).then(function(t){n.Cart.UserId()>0?n.Get_Shopping_Cart_Details():(n.IsUpdating_Cart(!1),n.Set_Cart_Status("true"),n.Cart.Id(t.Id),n.Cart.ShopingCart.removeAll(),$.each(t.ShopingCart,function(t,i){var r=new n.ShopingCartViewModel;r.Product_TypeName(i.Product_TypeName);r.Product_TypeId(i.Product_TypeId);r.Product_Type(i.Product_Type);r.Product_Name(i.Product_Name);r.Product_Id(i.Product_Id);r.Quantity(i.Quantity);r.ImageUrl(i.ImageUrl);r.PageUrl(i.PageUrl);r.Price(i.Price);r.SKU(i.SKU);n.Cart.ShopingCart.push(r)}),localStorage.setObject(n.ShopingCartKey,n.Cart))})}};n.Manage_Selling_Cart=function(){if(n.Cart2.SellingCart().length>0){var t={Status:"Ready",CartType:"Selling",Id:n.Cart2.Id(),Tax_Rate:n.Tax_Rate(),UserId:n.Cart2.UserId(),Total_Price:n.Total_Price_Sell(),Total_Sum:n.Sub_Total_Sell(),Total_Deduction:n.Total_Deduction(),Tax_Amount:n.Tax_Amount_Sell(),ShippingCharge:n.ShippingCharge(),Total_Item:n.Cart2.SellingCart().length,SellingCart:n.Cart2.SellingCart()};$.when($.ajax({type:"POST",dataType:"json",url:"/selling-cart/update",contentType:"application/json; charset=utf-8",data:ko.toJSON(t)})).then(function(t){n.Cart2.UserId()>0?n.Get_Shopping_Cart_Details():(n.IsUpdating_Cart(!1),n.Set_SellingCart_Status("true"),n.Cart2.Id(t.Id),n.Cart2.SellingCart.removeAll(),$.each(t.SellingCart,function(t,i){var r=new n.SellingCartViewModel;r.Product_TypeName(i.Product_TypeName);r.Product_TypeId(i.Product_TypeId);r.Product_Type(i.Product_Type);r.Product_Name(i.Product_Name);r.Product_Id(i.Product_Id);r.Quantity(i.Quantity);r.ImageUrl(i.ImageUrl);r.PageUrl(i.PageUrl);r.Price(i.Price);r.SKU(i.SKU);r.BoxValue(i.BoxValue);r.Condition(i.Condition);r.ManualValue(i.ManualValue);n.Cart2.SellingCart.push(r)}),localStorage.setObject(n.SellingCartKey,n.Cart2))})}};n.Update_Total_Price=function(){if(n.Cart.ShopingCart().length>0){var t={Status:"Ready",CartType:"Shopping",Id:n.Cart.Id(),UserId:n.Cart.UserId(),Total_Price:n.Total_Price(),Tax_Rate:n.Tax_Rate(),Total_Sum:n.Sub_Total(),Tax_Amount:n.Tax_Amount(),ShippingCharge:n.ShippingCharge(),Total_Item:n.Cart.ShopingCart().length,ShopingCart:n.Cart.ShopingCart()};$.when($.ajax({type:"POST",dataType:"json",url:"/shopping-cart/update-total-price",contentType:"application/json; charset=utf-8",data:ko.toJSON(t)})).then(function(){})}};n.Update_Total_Price_Sell=function(){if(n.Cart2.SellingCart().length>0){var t={Status:"Ready",CartType:"Selling",Id:n.Cart2.Id(),Tax_Rate:n.Tax_Rate(),UserId:n.Cart2.UserId(),Total_Price:n.Total_Price_Sell(),Total_Sum:n.Sub_Total_Sell(),Tax_Amount:n.Tax_Amount_Sell(),Total_Deduction:n.Total_Deduction(),Total_Item:n.Cart2.SellingCart().length,ShippingCharge:n.ShippingCharge(),SellingCart:n.Cart2.SellingCart()};$.when($.ajax({type:"POST",dataType:"json",url:"/selling-cart/update-total-price",contentType:"application/json; charset=utf-8",data:ko.toJSON(t)})).then(function(){})}};n.Add_To_WishList=function(n,t,i,r,u){var f={WishType:i,Product_Id:n,ProductType_Id:t,Price:r,SKU:u};$.ajax({type:"POST",dataType:"json",url:"/add-to-wishlist",contentType:"application/json; charset=utf-8",data:ko.toJSON(f),success:function(n){Boolean(n)?alert("This product added in your wishlist."):alert("Already added in your wishlist.")}})}}function create_cookies(n){var t="; "+document.cookie,i=t.includes("WebsiteCookies=true");i||(document.cookie="WebsiteCookies=true");document.getElementById(n).style.display="none"}function hide_cookies(n){document.getElementById(n).style.display="none"}function onBegin(){$(".submitBtn").val("Processing...");$(".submitBtn").prop("disabled",!0)}function onComplete(){$(".submitBtn").val("");$(".submitBtn").prop("disabled",!1)}!function(n){jQuery.fn.extend({mobileMegaMenu:function(t){var i=n.extend({changeToggleText:!1,enableWidgetRegion:!1,prependCloseButton:!1,stayOnActive:!0,toogleTextOnClose:"Close Menu",menuToggle:"toggle-menu"},t);return this.each(function(){function f(){l.toArray().forEach(function(t){r=r>n(t).height()?r:n(t).height()});t.css("min-height",r+50)}var v='<li><a class="close-button '+i.menuToggle+'" href="#">Close Menu<\/a><\/li>',r=-1,t=n(this),y=n("a."+i.menuToggle).html(),h,c,l,a,u;t.find("ul a").addClass("menu-item");t.find("ul ul").before('<a class="next-button" href="#"><div class="arrow">Next<\/div><\/a>').siblings("a:first-of-type").addClass("has-next-button");t.find("ul ul").prepend('<li><a class="back-button" href="#">Back<\/a><\/li>');i.prependCloseButton&&t.find("ul").closest("ul").prepend(v);var e=n("a."+i.menuToggle),o=t.find("a.next-button"),s=t.find("a.back-button");i.enableWidgetRegion&&(h=t.find(".widget-region").detach(),t.find("ul:first").append(h));l=t.find("ul");(n(window).resize(function(){clearTimeout(c);c=setTimeout(function(){f()},500)}),f(),i.stayOnActive)&&(a=window.location.href,u=a.replace("#",""),t.find("ul li a").filter(function(){var t,i,r;if(n(this).hasClass("menu-item")&&((t=String(this.href).split("/"),t.pop(),t.pop(),i=n(this).parents("li").parents("li").children("a.menu-item"),r=String(n(i).attr("href")).split("/"),r.pop(),!i.length)||JSON.stringify(t)===JSON.stringify(r)))return this.href===u}).addClass("active").css("font-weight","bold"),t.find("a.active").siblings("ul").length>0&&t.find("a.active").removeClass("active").css("font-weight","bold").siblings("ul").find("li:first-of-type").first().find("a").addClass("active"),t.find("a.active").closest("ul").addClass("is-in-view").parents("ul").addClass("has-been-viewed"),t.find("a.active").closest("ul").parents().siblings("li").find("ul").hide());e.click(function(r){r.preventDefault();t.find("ul:first-child").hasClass("has-been-viewed")||t.find("ul:first-child").toggleClass("is-in-view");i.changeToggleText&&(t.hasClass("open")?t.hasClass("open")&&n("a."+i.menuToggle).html(y):n("a."+i.menuToggle).html(i.toogleTextOnClose));t.toggleClass("open")});o.click(function(t){t.preventDefault();setTimeout(function(){n("html, body").animate({scrollTop:0},250)},250);n(this).siblings("ul:first-of-type").addClass("is-in-view");n(this).parents().siblings("li").find("ul").hide();n(this).siblings("ul").show();n(this).parents("ul:first-of-type").addClass("has-been-viewed").removeClass("is-in-view")});s.click(function(i){i.preventDefault();n(this).parents("ul.is-in-view").closest("ul.has-been-viewed").toggleClass("has-been-viewed is-in-view").promise().done(function(){t.find("ul.is-in-view ul.is-in-view").toggleClass("is-in-view")})});(n("html").hasClass("no-csstransforms")||n("html").hasClass("no-cssanimations"))&&(e.click(function(n){n.preventDefault();t.css("transform","none");t.hasClass("open")?t.animate({left:0}):t.animate({left:"-100%"})}),o.click(function(n){n.preventDefault();t.find(".has-been-viewed").css("transform","none");t.find("ul").animate({right:"+=100%"},250)}),s.click(function(n){n.preventDefault();t.find(".has-been-viewed").css("transform","none");t.find("ul").animate({right:"-=100%"},250)}))})}})}(jQuery),function(n){n.fn.imageScroll=function(t){function u(){var t=n(r).children().first(),f=n(r).children().last(),u=t.outerWidth(!0);n(r).parent().css("text-align").toLowerCase()=="center"&&(u*=2);console.log();switch(i.orientation){case"left":case"top":t.animate({"margin-left":"-="+u+"px"},i.speed,function(){t.css("margin-left","+="+u+"px");f.after(t)});break;case"right":case"bottom":t.animate({"margin-left":"+="+u+"px"},i.speed,function(){t.css("margin-left","-="+u+"px");t.before(f)})}i.callback.call(r)}var e={orientation:"left",speed:600,interval:1500,hoverPause:!0,callback:function(){return!1}},i=n.extend(e,t),r=this,f=setInterval(u,i.interval);return i.hoverPause&&n(this).hover(function(){clearInterval(f)},function(){f=setInterval(u,i.interval)}),this}}(window.jQuery||window.Zepto);var _app;Storage.prototype.setObject=function(n,t){this.setItem(n,ko.toJSON(t))};Storage.prototype.getObject=function(n){var t=this.getItem(n);return t&&JSON.parse(t)};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.Contains||(String.prototype.Contains=function(n){return this.indexOf(n)!==-1});String.prototype.startsWith||(String.prototype.startsWith=function(n){return!this.indexOf(n)});String.prototype.endsWith||(String.prototype.endsWith=function(n){return this.indexOf(n,this.length-n.length)!==-1});$(document).ready(function(){function u(){var r=t.height(),n=t.scrollTop(),u=n+r;$.each(i,function(){var t=$(this),r=t.outerHeight(),i=t.offset().top,f=i+r;f>=n&&i<=u?t.addClass("in-view"):t.removeClass("in-view")})}var n,i,t,r;_app=new MainAppViewModel;ko.applyBindings(_app);n=$("#game-store-user-id").val()||0;n=parseInt(n);_app.Cart.UserId(n);_app.Cart2.UserId(n);_app.Check_Local_Storage_And_Update_Cart();n>0?(_app.Get_Selling_Cart_Details(),_app.Get_Shopping_Cart_Details()):(_app.Manage_Shopping_Cart(),_app.Manage_Selling_Cart());$(".main-menu").mobileMegaMenu({changeToggleText:!0,enableWidgetRegion:!0,prependCloseButton:!0,stayOnActive:!0,toogleTextOnClose:"X",menuToggle:"main-menu-toggle"});i=$(".animation-element");t=$(window);t.on("scroll resize",u);t.trigger("scroll");$("#imgs").imageScroll({orientation:"left",speed:600,interval:1e3,hoverPause:!0});$(window).scroll(function(){var n=$(window).scrollTop();n>=40?$("body").addClass("smaller"):$("body").removeClass("smaller")});r=function(){var n=0;return function(t,i){clearTimeout(n);n=setTimeout(t,i)}}();$("#search-box").on("change input",function(n){r(function(){console.log("Event: ",n.type);var t=n.target.value||"";console.log(t);t.length>0?($(".search-processing-icon").show(),$(".search-remove-icon").hide(),$.ajax({type:"POST",dataType:"html",url:"/search",data:JSON.stringify({Query:t}),contentType:"application/json; charset=utf-8",success:function(n){$("#search-result").html(n);$(".search-processing-icon").hide();$(".search-remove-icon").show()}})):$("#search-result").html("")},500)});$(".search-remove-icon").on("click",function(){$(".search-remove-icon").hide();$("#search-box").val("")})});